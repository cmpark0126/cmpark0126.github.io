---
title:  "운영체제(8) - Memory Management Strategies(2)"
modified: 2019-05-14T12:00:00-:30:00
categories:
  - Operating_System
tags:
  - [CS, Operating_System]
---

'운영체제'를 공부하여 정리한 내용입니다.

## 4. Paging

### 기본 방법

-   각 프로세스마다 페이지 테이블이 존재한다.
    -   페이지 테이블이 작던 시절은 특수 레지스터에서 이 테이블 페이지를 담당했다.
    -   현재는 페이지 테이블이 너무 커서, 메인 메모리에 페이지 테이블을 올리고, 특수 레지스터는 이 페이지 테이블의 위치를 참조하도록 한다.(PTBR: Page table Base Register)


-   페이지를 위해 정할 비트 개수가 있다.

    -   page number에 어느정도 bit를 할당할 것인지.
        -   한 프로세스가 가질 수 있는 최대 페이지의 개수가 결정 된다.
        -   10bit를 할당하게 되면 2^22개가 최대 개수다.
    -   page offset에 어느정도 bit를 할당할 것인지.

        -   시스템이 가지는 페이지 단위의 partion의 크기를 알 수 있다.
        -   (32 - 22)bit = 22 bit를 할당하게 되면, 2^10가 한 페이지당 크기가 된다.

### 하드웨어 지원: TLB

-   페이지 테이블을 매번 참조하게 되면 메인메모리를 계속 봐야해서 그 자체에 오버헤드가 너무 크다.
    -   캐시와 비슷한 특수한 하드웨어 캐시 사용.
    -   TLB: Translation Look-aside Buffers라고 부른다.
    -   자주 사용하는 페이지 번호는 이 하드웨어 캐시에 저장하여 사용한다.
    -   ASID를 두어 프로세스의 정보 파악하여, 현재 찾은 페이지 번호가 이 프로세스의 것이 맞는지도 확인할 수 있다.
        -   보안을 위한 작업이기도하지만, 이 캐시가 Context Switch와 별도로 움직일 수 있도록 해준다.

### Protection

-   Page 자체가 수정이 가능한 Page인지, 아니면 읽기 전용인지를 설정할 수 있다. (Protection bits)
-   사용가능 한 Page인지를 나타내는 (Valid/invalid) 비트가 있다.
    -   페이지 테이블의 크기는 정해져 있으나, 프로세스가 이 페이지 테이블을 전부 사용하지 않을 수 있다.(일반적으로)
    -   이 때는 사용하지 않는 부분의 Entry가 invalid 하게 두고 OS가 파악하고 있어야 적절하지 않은 접근을 막을 수 있다.
